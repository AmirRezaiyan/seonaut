{{ template "head" . }}

<h1 class="title">Projects <a href="/new-project">+ Add Project</a></h1>

{{ if not . }}
	<p>There are not projects yet, you can <a href="/new-project">add one</a> now
{{ end }}

{{ range . }}
<div class="project">
	<h2 class="project-title">{{ .Project.URL }}</h2>
	{{ if .Crawl.Id }}
		{{ if .Crawl.End.Valid }}
			<div>
				<small>Crawled on {{ .Crawl.Start.Format "Jan 02, 2006" }}, crawl duration was {{ .Crawl.TotalTime }}.</small><br>
				<b>{{ .TotalCount }}</b> pages crawled.<br>
				</div>
				<p><b>Total crawled by media type: </b></p>
				{{ template "list" .MediaCount }}
				<p><b>Total crawled by status code: </b></p>
				{{ template "list" .StatusCodeCount }}
				<p class="actions">
					<a class="button" href="/crawl?pid={{ .Project.Id }}">Crawl Now</a>
					{{ if gt .TotalIssues 0 }}
						<a class="button" href="/issues?cid={{ .Crawl.Id }}">View Issues</a>
					{{ else }}
						<p><b>ðŸŽ‰ Well done! this project does not have any issue.</b></p>
					{{ end }}
				</p>
		{{ else }}
		<p><b>Now crawling...</b></p>
		{{ end }}
	{{ else }}
		<div><b>This project has not been crawled yet.</b></div>
		<p class="actions">
			<a class="button" href="/crawl?pid={{ .Project.Id }}">Crawl Now</a>
		</p>
	{{ end }}
</div>
{{ end }}

{{ template "footer" . }}