{{ template "head" . }}

{{ with .Data }}
<a name="menu"></a>
<div class="content action">
	<a href="/">Projects</a> /
	<a href="/dashboard?pid={{ .ProjectView.Project.Id }}">{{ .ProjectView.Project.Host }}</a> /
	<a href="/issues?pid={{ .ProjectView.Project.Id }}">Issues</a> /
	<a href="/issues/view?pid={{ .ProjectView.Project.Id }}&eid={{ .Eid }}">{{ trans .Eid }}</a> /
	<span class="title">URL</span>
</div>

<div class="issue-panel">
<div class="content">
	<div class="url-header">

		<div class="col1">
				{{ if .PageReportView.PageReport.Title }}
				{{ .PageReportView.PageReport.Title }} <br>
				{{ end }}
				 <a href="{{ .PageReportView.PageReport.URL }}" target="_blank" class="url link-out" >{{ .PageReportView.PageReport.URL }} ↗</a></small>
		</div>
		<div class="details-container">
			<details>
				<summary>
				{{ if eq .Tab "details" }} Details {{ end }}
				{{ if eq .Tab "inlinks" }} Inlinks {{ end }}
				{{ if eq .Tab "internal" }} Internal links {{ end }}
				{{ if eq .Tab "external"}} External links {{ end }}
				{{ if eq .Tab "redirections" }} Redirections {{ end }}
				{{ if eq .Tab "images" }} Images {{ end }}
				{{ if eq .Tab "iframes" }} Iframes {{ end }}
				{{ if eq .Tab "scripts" }} Scripts {{ end }}
				{{ if eq .Tab "styles" }} Styles {{ end }}
				</summary>
				<ul>
			<li><a href="/resources?pid={{ .ProjectView.Project.Id }}&rid={{ .PageReportView.PageReport.Id }}&eid={{ .Eid }}&t=details">→ Details</a></li>

			<li><a href="/resources?pid={{ .ProjectView.Project.Id }}&rid={{ .PageReportView.PageReport.Id }}&eid={{ .Eid }}&t=inlinks">→ Inlinks</a></li>

			<li><a href="/resources?pid={{ .ProjectView.Project.Id }}&rid={{ .PageReportView.PageReport.Id }}&eid={{ .Eid }}&t=internal">→ Internal links</a></li>

			<li><a href="/resources?pid={{ .ProjectView.Project.Id }}&rid={{ .PageReportView.PageReport.Id }}&eid={{ .Eid }}&t=external">→ External links</a></li>

			<li><a href="/resources?pid={{ .ProjectView.Project.Id }}&rid={{ .PageReportView.PageReport.Id }}&eid={{ .Eid }}&t=redirections">→ Redirections</a></li>

			<li><a href="/resources?pid={{ .ProjectView.Project.Id }}&rid={{ .PageReportView.PageReport.Id }}&eid={{ .Eid }}&t=images">→ Images</a></li>

			<li><a href="/resources?pid={{ .ProjectView.Project.Id }}&rid={{ .PageReportView.PageReport.Id }}&eid={{ .Eid }}&t=iframes">→ Iframes</a></li>

			<li><a href="/resources?pid={{ .ProjectView.Project.Id }}&rid={{ .PageReportView.PageReport.Id }}&eid={{ .Eid }}&t=scripts">→ Scripts</a></li>

			<li><a href="/resources?pid={{ .ProjectView.Project.Id }}&rid={{ .PageReportView.PageReport.Id }}&eid={{ .Eid }}&t=styles">→ Styles</a></li>
		</ul>
		</details>
		</div>
	</div>

	{{ $cid := .ProjectView.Crawl.Id }}
	{{ $pid := .ProjectView.Project.Id }}
	{{ $eid := .Eid }}

	{{ if eq .Tab "details" }}
	<div class="report-block">
		<div class="page-details">
			{{ $errorTypes := .PageReportView.ErrorTypes }}
			{{ with .PageReportView.PageReport }}
			<div class="report-box" >

				<div class="url-detail">
					<div>Blocked:</div>
					<div><small>{{ if .BlockedByRobotstxt }}Blocked{{ else }}Not blocked{{ end }} by robots.txt</small></div>
				</div>

				<div class="url-detail">
					<div>Status Code:</div>
					<div><small>{{ if .StatusCode }}{{ .StatusCode }}{{ else }}-{{ end }}</small></div>
				</div>

				<div class="url-detail">
					<div>Content Type:</div>
					<div><small>{{ if .ContentType }}{{ .ContentType }}{{ else }}-{{ end }}</small></div>
				</div>

				<div class="url-detail">
					<div>Size:</div><div> <small>
						{{ if .Size }}{{ .SizeInKB }}KB{{ else }} - {{ end }}</small><br></div>
				</div>

				<div class="url-detail">
					<div>Robots: </div><div><small>
						{{ if .Robots }}{{ .Robots }}{{ else }} - {{ end }}</small><br></div>
				</div>

				
				<div class="url-detail">
					<div>Redirect URL:</div>
					<div><small>{{ if .RedirectURL }}{{ .RedirectURL }}{{ else }} - {{ end }}</small></div>
				</div>

				<div class="url-detail">
					<div>Refresh: </div>
					<div><small>{{ if .Refresh }}{{ .Refresh }}{{ else }} - {{ end }}</small></div>
				</div>

				<div class="url-detail">
					<div>Canonical:</div>
					<div><small>{{ if .Canonical }}{{ .Canonical }}{{ else }} - {{ end }}</small></div>
				</div>

				<div class="url-detail">
					<div>Language:</div>
					<div><small>{{ if .Lang }}{{ .Lang }}{{ else }} - {{ end }}</small></div>
				</div>

				<div class="url-detail">
					<div>Hreflang:</div>
					<div>
						{{ if .Hreflangs }}
						<div class="hreflang-list">
							<span>Language</span>
							<span>URL</span>
						</div>
						{{ range .Hreflangs }}
							<div class="hreflang-list">
								<span>{{ if .Lang }}{{ .Lang }}{{ end }}</span>
								<span>{{ .URL }}</span>
							</div>
						{{ end }}
						{{ else }}
							-
						{{ end }}
					</div>
				</div>

				<div class="url-detail">
					<div>Title:</div>
					<div><small>{{ if .Title }}{{ .Title }}{{ else }} - {{ end }}</small></div>
				</div>

				<div class="url-detail">
					<div>Description:</div>
					<div><small>{{ if .Description }}{{ .Description }}{{ else }} - {{ end }}</small></div>
					</div>

					<div class="url-detail">
						<div>H1:</div>
						<div><small>{{ if .H1 }}{{ .H1 }}{{ else }}-{{ end }}</small></div>
					</div>

					<div class="url-detail">
						<div>H2:</div>
						<div><small>{{ if .H2 }}{{ .H2 }}{{ else }} - {{ end }}</small></div>
					</div>

					<div class="url-detail">
						<div>Words:</div>
						<div><small>{{ if .Words }}{{ .Words }}{{ else }} - {{ end }}</small></div>
					</div>
					<div class="url-detail">
						<div>Issues:</div>
						<div>
							{{ if $errorTypes }}
							<ul class="pagereport-errors">
							{{ range $errorTypes }}
									<li><a href="/issues/view?pid={{ $pid }}&eid={{ . }}">→ {{ trans . }}</a></li>
							{{ end }}
							</ul>
							{{ else }}
								-
							{{ end }}
						</div>
					</div>
			</div>
			{{ end }}
		</div>
	</div>
	{{ end }}

	{{ if eq .Tab "inlinks" }}

		<div class="report-block">
			{{ if .PageReportView.InLinks }}
			<ul class="url-list">
				{{ range .PageReportView.InLinks }}
					<li>
						<div>
						{{ if .Title }}{{ .Title }}<br/>{{ end }}
						<a href="/resources?pid={{ $pid }}&rid={{ .Id }}&eid={{ $eid }}" class="url">{{ .URL }}</a>
						</div>
						<div><a href="/resources?pid={{ $pid }}&rid={{ .Id }}&eid={{ $eid }}">→ View details</a></div>
					</li>
				{{ end }}
			</ul>
			{{ else }}
				<p ><small>There are no links to this page.</small></p>
			{{ end }}
		</div>
	{{ end }}

	{{ if eq .Tab "redirections" }}
		<div class="report-block">
			{{ if .PageReportView.Redirects }}
				<ul class="url-list">
					{{ range .PageReportView.Redirects }}
						<li>
							<div>
							{{ if .Title }}{{ .Title }}<br/>{{ end }}
							<a href="/resources?pid={{ $pid }}&rid={{ .Id }}&eid={{ $eid }}" class="url">{{ .URL }}</a>
							</div>
							<div><a href="/resources?pid={{ $pid }}&rid={{ .Id }}&eid={{ $eid }}">→ View details</a></div>
						</li>
					{{ end }}
				</ul>
			{{ else }}
				<p ><small>There are no redirects to this page.</small></p>
			{{ end }}
		</div>
	{{ end }}

	{{ if eq .Tab "internal" }}
		<div class="report-block">
			{{ if .PageReportView.PageReport.Links }}
				<ul class="url-list">
					{{ range .PageReportView.PageReport.Links }}
						<li>
							<div>
							{{ if .Text }}{{ .Text }}<br/>{{ end }}
							<span class="url">{{ .URL }}</span>
							{{ if .NoFollow }}<br><span class="alert"><small>nofollow</small></span>{{ end }}
						</div>
						</li>
					{{ end }}
				</ul>
			{{ else }}
				<p ><small>There are no internal links in this page.</small></p>
			{{ end }}
		</div>
	{{ end }}

	{{ if eq .Tab "external" }}
		<div class="report-block">
			{{ if .PageReportView.PageReport.ExternalLinks }}
			<ul class="url-list">
				{{ range .PageReportView.PageReport.ExternalLinks }}
					<li>
						<div>
						{{ if .Text }}{{ .Text }} <br> {{ end }}
						<span class="url">{{ .URL }}</span>
						{{ if not .NoFollow }}<br><span class="alert"><small>follow</small></span>{{ end }}
						</div>
					</li>
				{{ end }}
			</ul>
			{{ else }}
				<p ><small>There are no external links in this page.</small></p>
			{{ end }}
		</div>
	{{ end }}

	{{ if eq .Tab "images" }}
		<div class="report-block">
			{{ if .PageReportView.PageReport.Images }}
			<ul class="url-list">
				{{ range .PageReportView.PageReport.Images }}
					<li>
						<div>
						{{ if .Alt}}{{ .Alt }}<br>{{ end }}
						<span class="url">{{ .URL }}</span>
						{{ if not .Alt}}<br><span class="alert">Missing or empty alt attribute</span>{{ end }}
						</div>
					</li>
				{{ end }}
			</ul>
			{{ else }}
				<p ><small>There are no images in this page.</small></p>
			{{ end }}
		</div>
	{{ end }}

	{{ if eq .Tab "iframes" }}
		<div class="report-block">
			{{ if .PageReportView.PageReport.Iframes }}
			<ul class="url-list">
				{{ range .PageReportView.PageReport.Iframes }}
					<li>
						<div>
						<span class="url">{{ . }}</span>
						</div>
					</li>
				{{ end }}
			</ul>
			{{ else }}
				<p ><small>There are no iframes in this page.</small></p>
			{{ end }}
		</div>
	{{ end }}

	{{ if eq .Tab "scripts" }}
		<div class="report-block">
			{{ if .PageReportView.PageReport.Scripts }}
			<ul class="url-list">
				{{ range .PageReportView.PageReport.Scripts }}
					<li><div><span class="url">{{ . }}</span></div></li>
				{{ end }}
			</ul>
			{{ else }}
				<p ><small>There are no scripts in this page.</small></p>
			{{ end }}
		</div>
	{{ end }}
	
	{{ if eq .Tab "styles" }}
		<div class="report-block">
		{{ if .PageReportView.PageReport.Styles }}
			<ul class="url-list">
				{{ range .PageReportView.PageReport.Styles }}
					<li><div><span class="url">{{ . }}</span></div></li>
				{{ end }}
			</ul>
		{{ else }}
			<p ><small>There are no styles in this page.</small></p>
		{{ end }}
		</div>
	{{ end }}
</div>
</div>
{{ end }}
{{ template "footer" . }}