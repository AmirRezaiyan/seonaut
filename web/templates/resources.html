{{ template "head" . }}

{{ with .Data }}
<a name="menu"></a>
<div class="content">
	<div class="action">
		<a href="/">Projects</a> /
		<a href="/issues?pid={{ .Project.Id }}">{{ .Project.Host }}</a> /
		<a href="/issues/view?cid={{ .Cid }}&eid={{ .Eid }}">{{ trans .Eid }}</a> /
		<span class="title">URL Explorer</span>
	</div>
</div>

<div class="content">
	<div class="box">
	<h2 class="pagereport-title list-header">
		{{ .PageReport.URL }} <a href="{{ .PageReport.URL }}" target="_blank" class="link-out">â†—</a>
	</h2>

	<div class="tabs">
		<ul>
			<li><a class="button{{ if eq .Tab "details" }} active{{ end }}" href="/resources?cid={{ .Cid }}&rid={{ .PageReport.Id }}&eid={{ .Eid }}&t=details">Details</a></li>

			<li><a class="button{{ if eq .Tab "inlinks" }} active{{ end }}" href="/resources?cid={{ .Cid }}&rid={{ .PageReport.Id }}&eid={{ .Eid }}&t=inlinks">Inlinks</a></li>

			<li><a class="button {{ if eq .Tab "internal" }} active {{ end }}" href="/resources?cid={{ .Cid }}&rid={{ .PageReport.Id }}&eid={{ .Eid }}&t=internal">Internal links</a></li>

			<li><a class="button {{ if eq .Tab "external"}} active {{ end }}" href="/resources?cid={{ .Cid }}&rid={{ .PageReport.Id }}&eid={{ .Eid }}&t=external">External links</a></li>

			<li><a class="button {{ if eq .Tab "redirections" }} active{{ end }}" href="/resources?cid={{ .Cid }}&rid={{ .PageReport.Id }}&eid={{ .Eid }}&t=redirections">Redirections</a></li>

			<li><a class="button {{ if eq .Tab "images" }} active{{ end }}" href="/resources?cid={{ .Cid }}&rid={{ .PageReport.Id }}&eid={{ .Eid }}&t=images">Images</a></li>

			<li><a class="button {{ if eq .Tab "scripts" }} active {{ end }}" href="/resources?cid={{ .Cid }}&rid={{ .PageReport.Id }}&eid={{ .Eid }}&t=scripts">Scripts</a></li>

			<li><a class="button{{ if eq .Tab "styles" }} active {{ end }}" href="/resources?cid={{ .Cid }}&rid={{ .PageReport.Id }}&eid={{ .Eid }}&t=styles">Styles</a></li>
		</ul>
	</div>
</div>
	{{ $cid := .Cid }}
	{{ $eid := .Eid }}
	
	{{ if eq .Tab "details" }}
	<div class="report-block">
		<div class="page-details">
			{{ with .PageReport }}
			<div class="report-box">
				<div><b>Status Code:</b> <small>{{ .StatusCode }}</small><br></div>
				<div><b>Content Type:</b> <small>{{ .ContentType }}</small><br></div>

				{{ if .Size }}
					<div><b>Size:</b> <small>{{ .SizeInKB }}KB</small><br></div>
				{{ end }}

				{{ if .Robots }}
					<div><b>Robots:</b> <small>{{ .Robots }}</small><br></div>
				{{ end }}

				{{ if .RedirectURL }}
					<div><b>Redirect URL:</b> <small>{{ .RedirectURL }}</small><br></div>
				{{ end }}

				{{ if .Refresh }}
					<div><b>Refresh:</b> <small>{{ .Refresh }}</small><br></div>
				{{ end }}

				{{ if .Canonical }}
					<div><b>Canonical:</b> <small>{{ .Canonical }}</small><br></div>
				{{ end }}

				{{ if .Lang }}
					<div><b>Language:</b> <small>{{ .Lang }}</small><br></div>
				{{ end }}

				{{ if .Hreflangs }}
					<div>
						<b>Hreflang:</b>
							<ul>
							{{ range .Hreflangs }}
								<li>
									{{ if .Lang }}{{ .Lang }}:{{ end }}
									<span class="url">{{ .URL }}</span>
								</li>
							{{ end }}
							</ul>
						</div>
				{{ end }}
			</div>

			{{ if or .Title .Description .H1 .H2 }}
				<div class="report-box">
					{{ if .Title }}
					<div><b>Title:</b> <small>{{ .Title }}</small><br></div>
					{{ end }}

					{{ if .Description }}
						<div><b>Description:</b> <small>{{ .Description }}</small><br></div>
					{{ end }}

					{{ if .H1 }}
						<div><b>H1:</b> <small>{{ .H1 }}</small><br></div>
					{{ end }}

					{{ if .H2 }}
						<div><b>H2:</b> <small>{{ .H2 }}</small><br></div>
					{{ end }}

					{{ if .Words }}
						<div><b>Words:</b> <small>{{ .Words }}</small><br></div>
					{{ end }}
				{{ end }}
				</div>
			{{ end }}

			<div class="report-box">
				{{ if .ErrorTypes }}
				<b>Issues in this URL:</b>
				<ul class="pagereport-errors">
				{{ range .ErrorTypes }}
						<li><a href="/issues/view?cid={{ $cid }}&eid={{ . }}">{{ trans . }}</a></li>
				{{ end }}
				</ul>
				{{ end }}
			</div>
		</div>
	</div>
	{{ end }}

	{{ if eq .Tab "inlinks" }}
		<div class="report-block">
			{{ if .InLinks }}
			<ul class="url-list">
				{{ range .InLinks }}
					<li>
						{{ if .Title }}{{ .Title }}<br/>{{ end }}
						<a href="/resources?cid={{ $cid }}&rid={{ .Id }}&eid={{ $eid }}" class="url">{{ .URL }}</a>
					</li>
				{{ end }}
			</ul>
			{{ else }}
				<p class="center"><small>There are no links to this page.</small></p>
			{{ end }}
		</div>
	{{ end }}

	{{ if eq .Tab "redirections" }}
		<div class="report-block">
			{{ if .Redirects }}
				<ul class="url-list">
					{{ range .Redirects }}
						<li>
							{{ if .Title }}{{ .Title }}<br/>{{ end }}
							<a href="/resources?cid={{ $cid }}&rid={{ .Id }}&eid={{ $eid }}" class="url">{{ .URL }}</a>
						</li>
					{{ end }}
				</ul>
			{{ else }}
				<p class="center"><small>There are no redirects to this page.</small></p>
			{{ end }}
		</div>
	{{ end }}

	{{ if eq .Tab "internal" }}
		<div class="report-block">
			{{ if .PageReport.Links }}
				<ul class="url-list">
					{{ range .PageReport.Links }}
						<li>
							{{ if .Text }}{{ .Text }}<br/>{{ end }}
							<span class="url">{{ .URL }}</span>
							{{ if .NoFollow }}<br><span class="alert"><small>nofollow</small></span>{{ end }}
						</li>
					{{ end }}
				</ul>
			{{ else }}
				<p class="center"><small>There are no internal links in this page.</small></p>
			{{ end }}
		</div>
	{{ end }}

	{{ if eq .Tab "external" }}
		<div class="report-block">
			{{ if .PageReport.ExternalLinks }}
			<ul class="url-list">
				{{ range .PageReport.ExternalLinks }}
					<li>
						{{ if .Text }}{{ .Text }} <br> {{ end }}
						<span class="url">{{ .URL }}</span>
						{{ if not .NoFollow }}<br><span class="alert"><small>follow</small></span>{{ end }}
					</li>
				{{ end }}
			</ul>
			{{ else }}
				<p class="center"><small>There are no external links in this page.</small></p>
			{{ end }}
		</div>
	{{ end }}

	{{ if eq .Tab "images" }}
		<div class="report-block">
			{{ if .PageReport.Images }}
			<ul class="url-list">
				{{ range .PageReport.Images }}
					<li>
						{{ if .Alt}}{{ .Alt }}<br>{{ end }}
						<span class="url">{{ .URL }}</span>
						{{ if not .Alt}}<br><span class="alert">Missing or empty alt attribute</span>{{ end }}
					</li>
				{{ end }}
			</ul>
			{{ else }}
				<p class="center"><small>There are no images in this page.</small></p>
			{{ end }}
		</div>
	{{ end }}

	{{ if eq .Tab "scripts" }}
		<div class="report-block">
			{{ if .PageReport.Scripts }}
			<ul class="url-list">
				{{ range .PageReport.Scripts }}
					<li class="url">{{ . }}</li>
				{{ end }}
			</ul>
			{{ else }}
				<p class="center"><small>There are no scripts in this page.</small></p>
			{{ end }}
		</div>
	{{ end }}
	
	{{ if eq .Tab "styles" }}
		<div class="report-block">
		{{ if .PageReport.Styles }}
			<ul class="url-list">
				{{ range .PageReport.Styles }}
				<li class="url">{{ . }}</li>
				{{ end }}
			</ul>
		{{ else }}
			<p class="center"><small>There are no styles in this page.</small></p>
		{{ end }}
		</div>
	{{ end }}

</div>
{{ end }}
{{ template "footer" . }}