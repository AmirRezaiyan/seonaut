{{ template "head" . }}

<div class="content">
	<h1 class="title">Projects</h1>
	<div class="action">
		<a href="/new-project" style="font-size: 1rem">+ Add Project</a>
	</div>
</div>

<div class="content">
	<div style="display:flex; flex-wrap: wrap">
	{{ range .Data.Projects }}
	<div class="col">
		<div class="project">
			<h2 class="project-title">{{ .Project.URL }}</h2>
			{{ if .Crawl.Id }}
			
				{{ if .Crawl.IssuesEnd.Valid }}
					{{ if eq .Crawl.TotalURLs 0 }}
						<p class="error">The SEOnaut bot could not crawl your site.</p>
						<a href="/crawl?pid={{ .Project.Id }}">Crawl Now</a>
					{{ else }}
						<div>
						<a href="/crawl?pid={{ .Project.Id }}">Crawl now</a>
						</div>
						<p class="project-buttons">
							<a class="button" href="/dashboard?pid={{ .Project.Id }}">View Report â†’</a>
						</p>
					{{ end }}
				{{ else }}
					<p>Now crawling...</p>
				{{ end }}
			{{ else }}
				<div>This project has not been crawled yet.</div>
				<p><a class="button" href="/crawl?pid={{ .Project.Id }}">crawl Now</a></p>
			{{ end }}
		</div>
	</div>
	{{ end }}
	</div>
</div>

{{ template "footer" . }}