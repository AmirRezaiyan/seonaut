{{ template "head" . }}

{{ with .Data }}
<div class="content">
	<div class="action">
		<a href="/">Projects</a> / <a href="/dashboard?pid={{ .ProjectView.Project.Id }}">{{ .ProjectView.Project.Host }}</a> / <span class="title">Issues</span>
	</div>
</div>

<div class="issue-panel">
	<div class="content">

		{{ $pid := .ProjectView.Project.Id }}

		<div class="critical-issues">
			<div class="section-title">
				<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd"><path d="M21.883 12l-7.527 6.235.644.765 9-7.521-9-7.479-.645.764 7.529 6.236h-21.884v1h21.883z"/></svg>
				<h1>Critical Issues</h1>
			</div>
			{{ if .IssueCount.CriticalIssues }}
			{{ range .IssueCount.CriticalIssues }}
			<div class="issues error">
				<div>
					<h2>{{ .Count }} {{ if eq .Count 1 }}URL{{ else }}URLs{{end }} {{ trans .ErrorType }}</h2>
				</div>
				<div class="issue-container">
					<div class="issue-col">
						<p>{{ trans (print .ErrorType "_DESC") }}</p>
					</div>
				
					<div class="issue-col">
						<div class="issue-links">
							<a href="/download?pid={{ $pid }}&eid={{ .ErrorType }}">↓ Download URLs</a><br>
							<a href="/issues/view?pid={{ $pid }}&eid={{ .ErrorType }}">→ View URLs</a>
						</div>
					</div>
				</div>
			</div>
			{{ end }}
			{{ else }}
				<p class="issues-empty">No issues where detected.</p>
			{{ end }}
		</div>

		<div class="alert-issues">
			<div class="section-title">
				<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd"><path d="M21.883 12l-7.527 6.235.644.765 9-7.521-9-7.479-.645.764 7.529 6.236h-21.884v1h21.883z"/></svg>
				<h1>Alerts</h1>
			</div>
			{{ if .IssueCount.AlertIssues }}
			{{ range .IssueCount.AlertIssues }}
			<div class="issues alert">
				<div>
					<h2>{{ .Count }} {{ if eq .Count 1 }}URL{{ else }}URLs{{end }} {{ trans .ErrorType }}</h2>
				</div>
				<div class="issue-container">
					<div class="issue-col">
						<p>{{ trans (print .ErrorType "_DESC") }}</p>
					</div>
					<div class="issue-col">
						<div class="issue-links">
							<a href="/download?pid={{ $pid }}&eid={{ .ErrorType }}">↓ Download URLs</a><br>
							<a href="/issues/view?pid={{ $pid }}&eid={{ .ErrorType }}">→ View URLs</a>
						</div>
					</div>
				</div>
			</div>
			{{ end }}
			{{ else }}
				<p class="issues-empty">No issues where detected.</p>
			{{ end }}
		</div>

		<div class="notice-issues">
			<div class="section-title">
				<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd"><path d="M21.883 12l-7.527 6.235.644.765 9-7.521-9-7.479-.645.764 7.529 6.236h-21.884v1h21.883z"/></svg>
				<h1>Notices</h1>
			</div>

			{{ if .IssueCount.WarningIssues }}
			{{ range .IssueCount.WarningIssues }}
			<div class="issues notice">
				<div>
					<h2>{{ .Count }} {{ if eq .Count 1 }}URL{{ else }}URLs{{end }} {{ trans .ErrorType }}</h2>
				</div>
				<div class="issue-container">
					<div class="issue-col">
						<p>{{ trans (print .ErrorType "_DESC") }}</p>
					</div>
					<div class="issue-col">
						<div class="issue-links">
							<a href="/download?pid={{ $pid }}&eid={{ .ErrorType }}">↓ Download URLs</a><br>
							<a href="/issues/view?pid={{ $pid }}&eid={{ .ErrorType }}">→ View URLs</a>
						</div>
					</div>
				</div>
			</div>
			{{ end }}
			{{ else }}
				<p class="issues-empty">No issues where detected.</p>
			{{ end }}
		</div>

	</div>
</div>
{{ end}}

{{ template "footer" . }}
