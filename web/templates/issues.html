{{ template "head" . }}

{{ with .Data }}
<div class="content action">
	<a href="/">Projects</a> / <a href="/dashboard?pid={{ .ProjectView.Project.Id }}">{{ .ProjectView.Project.Host }}</a> / <span class="title">Issues</span>
</div>

<div class="issue-panel">
	<div class="content">
		
		{{ $pid := .ProjectView.Project.Id }}

		<div class="critical-issues">
			<div class="issues-header">
				<h2>Critical Issues</h2>
				<p><small>Critical errors affecting your ranking. Fix them first.</small></p>
			</div>
			
			{{ if .IssueCount.CriticalIssues }}
			{{ range .IssueCount.CriticalIssues }}
			<div class="issues error">
				<div>
					<h2>{{ .Count }} {{ if eq .Count 1 }}URL{{ else }}URLs{{end }} {{ trans .ErrorType }}</h2>
				</div>
				<div class="issue-container">
					<div class="issue-col">
						<p>{{ trans (print .ErrorType "_DESC") }}</p>
					</div>
				
					<div class="issue-col">
						<div class="issue-links">
							<a href="/download?pid={{ $pid }}&eid={{ .ErrorType }}">↓ Download URLs</a><br>
							<a href="/issues/view?pid={{ $pid }}&eid={{ .ErrorType }}">→ View URLs</a>
						</div>
					</div>
				</div>
			</div>
			{{ end }}
			{{ else }}
				<p class="issues-empty">No issues where detected.</p>
			{{ end }}
		</div>

		<div class="alert-issues">

			<div class="issues-header">
				<h2>Alerts</h2>
				<p><small>Issues that are holding your site back. Fix them next.</small></p>
			</div>

			{{ if .IssueCount.AlertIssues }}
			{{ range .IssueCount.AlertIssues }}
			<div class="issues alert">
				<div>
					<h2>{{ .Count }} {{ if eq .Count 1 }}URL{{ else }}URLs{{end }} {{ trans .ErrorType }}</h2>
				</div>
				<div class="issue-container">
					<div class="issue-col">
						<p>{{ trans (print .ErrorType "_DESC") }}</p>
					</div>
					<div class="issue-col">
						<div class="issue-links">
							<a href="/download?pid={{ $pid }}&eid={{ .ErrorType }}">↓ Download URLs</a><br>
							<a href="/issues/view?pid={{ $pid }}&eid={{ .ErrorType }}">→ View URLs</a>
						</div>
					</div>
				</div>
			</div>
			{{ end }}
			{{ else }}
				<p class="issues-empty">No issues where detected.</p>
			{{ end }}
		</div>

		<div class="notice-issues">

			<div class="issues-header">
				<h2>Warnings</h2>
				<p><small>Issues you may want to keep an eye on.</small></p>
			</div>

			{{ if .IssueCount.WarningIssues }}
			{{ range .IssueCount.WarningIssues }}
			<div class="issues notice">
				<div>
					<h2>{{ .Count }} {{ if eq .Count 1 }}URL{{ else }}URLs{{end }} {{ trans .ErrorType }}</h2>
				</div>
				<div class="issue-container">
					<div class="issue-col">
						<p>{{ trans (print .ErrorType "_DESC") }}</p>
					</div>
					<div class="issue-col">
						<div class="issue-links">
							<a href="/download?pid={{ $pid }}&eid={{ .ErrorType }}">↓ Download URLs</a><br>
							<a href="/issues/view?pid={{ $pid }}&eid={{ .ErrorType }}">→ View URLs</a>
						</div>
					</div>
				</div>
			</div>
			{{ end }}
			{{ else }}
				<p class="issues-empty">No issues where detected.</p>
			{{ end }}
		</div>

	</div>
</div>
{{ end}}

{{ template "footer" . }}
